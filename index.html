<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='./index.css' rel='stylesheet' type='text/css'>
    <title>Starry Portfolio</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div id="background">
        <div id="stars"></div>
        <div id="stars2"></div>
        <div id="stars3"></div>
    </div>
    <nav id="nav">
        <ul>
            <li class="hidden" id="homelink"><a href="#landingPage">Home</a></li>
            <li class="hidden" id="planetslink"><a href="#planetsPage">Planets</a></li>
            <li class="hidden" id="contactlink"><a href="#contactPage">Contact</a></li>
        </ul>
    </nav>
    <div id="landingPage">
        <div id="titlebox">
            <h1 class="title" id="title1"><span class="hidden" id="title1a">A long time ago</span> <span class="hidden" id='title1b'>in a galaxy far, far away....</span></h1>
            <h1 class="title hidden" id="title2">There was a resume so incredible...</h1>
            <h1 class="title" id="title3"><span class="hidden" id="title3a">That you couldn't help but... </span> <span class="hidden" id="title3b" style="color: white;">scroll.</span></h1>
        </div> 
    </div>
    <div id="planetsPage">
        <div id="planet1" class="planet left hidden"></div>
        <div id="planet2" class="planet right hidden"></div>
        <div id="planet3" class="planet left hidden"></div>
        <div id="planet4" class="planet right hidden"></div>
    </div>
    <div id="contactPage"></div>
    <script>
        /*
        This jquery statement listens for scrolls on the body element
        and checks whether or not the navbar has reached the top of the first element
        if so it should have a transparent-black background, otherwise transparent

        Also listens for when to reveal the planets
        */
        $("body").scroll(function() {
            let scrollTop = $("#titlebox").offset().top;
            if ( scrollTop <= ($("#nav").offset().top + 48)) $("#nav").css( "background", "rgba(0,0,0, 0.85)" ).css("box-shadow", "-10px 10px 10px black");
            else $("#nav").css( "background", "transparent" ).css("box-shadow", "none");

            let planets = ["#planet1", "#planet2", "#planet3", "#planet4"];
            for(let i = 0; i < planets.length; i++){
                if (($(planets[i]).offset().top * 2) <= (window.scrollY + window.innerHeight) && $(planets[i]).hasClass('hidden')){
                    $(planets[i]).removeClass('hidden');
                    //Left side
                    if(i % 2 == 0) $(planets[i]).css('animation', 'slide-left 1s');
                    //Right side
                    else $(planets[i]).css('animation', 'slide-right 1s');
                }
            }

            let homelink = $("#homelink"), planetslink = $("#planetslink"), contactlink = $("#contactlink");
            if(homelink.hasClass('hidden')){
                homelink.css('animation', 'fadeIn 2s');
                window.setTimeout(() => homelink.removeClass("hidden"), 2000);
                planetslink.css('animation', 'fadeIn 2s 0.5s');
                window.setTimeout(() => planetslink.removeClass("hidden"), 2500)
                contactlink.css('animation', 'fadeIn 2s 1s');
                window.setTimeout(() => contactlink.removeClass("hidden"), 3000)
            }
        });
        /*
        This function reveals elements in the landing page
        */        
        (function($){
            let title1a = $("#title1a");
            let title1b = $("#title1b");
            let title2 = $("#title2");
            let title3a = $("#title3a");
            let title3b = $("#title3b");

            title1a.css('animation', 'fadeIn 1s');
            title1b.css('animation', 'fadeIn 1s 2s');
            title2.css('animation', 'fadeIn 1s 4s');
            title3a.css('animation', 'fadeIn 1s 6s');
            title3b.css('animation', 'fadeIn 1s 8s');

            window.setTimeout(() => title1a.toggleClass("hidden"), 1000)
            window.setTimeout(() => title1b.toggleClass("hidden"), 3000)
            window.setTimeout(() => title2.toggleClass("hidden"), 5000)
            window.setTimeout(() => title3a.toggleClass("hidden"), 7000)
            window.setTimeout(() => title3b.toggleClass("hidden"), 9000)

        })(jQuery)
        const BASE_URL = 'https://api.github.com/users/connoraleks/repos';
        const getRepos = async () => {
            try {
                const response = await axios.get(`${BASE_URL}`);
                const data = response.data;
                console.log(data);
                data.forEach(element => {
                    console.log(element.pushed_at)
                });
            } catch (errors) {
                console.error(errors);
            }
        };
        getRepos();
    </script>
</body>
</html>